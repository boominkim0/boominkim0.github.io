(()=>{"use strict";class t{constructor(t){this.stageWitdh=t,this.size=100,this.halfSize=this.size/2,this.x=t+this.size,this.y=0,this.speed=2*Math.random()+1}draw(t,i,s){this.animate(t,s)}getY2(t,i){let s=this.getPointOnQuad(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3,0),e=s.x;for(let h=1;h<200;h++){const a=h/200;if(s=this.getPointOnQuad(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3,a),t>=e&&t<=s.x)return s;e=s.x}return s}getQuadValue(t,i,s,e){return(1-e)*(1-e)*t+2*(1-e)*e*i+e*e*s}getPointOnQuad(t,i,s,e,h,a,n){return this.quadTangent(t,s,h,n),this.quadTangent(i,e,a,n),{x:this.getQuadValue(t,s,h,n),y:this.getQuadValue(i,e,a,n)}}quadTangent(t,i,s,e){return 2*(1-e)*(i-t)+2*(s-i)*e}getY(t,i){for(let s=1;s<i.length;s++)if(t>=i[s].x1&&t<=i[s].x3)return this.getY2(t,i[s]);return{y:0,rotation:0}}animate(t,i){this.x-=this.speed,this.x<-this.size&&(this.x=this.stageWitdh+this.size);const s=this.getY(this.x,i);this.y=s.y-this.halfSize,t.beginPath(),t.arc(this.x,this.y,50,0,2*Math.PI),t.fillStyle="#00BCD4",t.fill(),t.closePath()}}class i{constructor(){}resize(i,s){this.hero=new t(i)}draw(t,i,s){this.hero.draw(t,i,s)}}class s{constructor(t,i,s){this.color=t,this.speed=i,this.total=s}resize(t,i){this.stageWidth=t,this.stageHeight=i,this.points=[],this.gap=Math.ceil(this.stageWidth/(this.total-2));for(let t=0;t<this.total;t++)this.points[t]={x:t*this.gap,y:this.getY()}}draw(t){t.fillStyle=this.color,t.beginPath();let i=this.points[0],s=i,e=[];i.x+=this.speed,i.x>-this.gap?this.points.unshift({x:-2*this.gap,y:this.getY()}):i.x>this.stageWidth+this.gap&&this.points.splice(-1),t.moveTo(i.x,i.y);let h=i.x,a=i.y;for(let n=1;n<this.points.length;n++){i=this.points[n],i.x+=this.speed;const r=(s.x+i.x)/2,o=(s.y+i.y)/2;t.quadraticCurveTo(s.x,s.y,r,o),e.push({x1:h,y1:a,x2:s.x,y2:s.y,x3:r,y3:o}),s=i,h=r,a=o}return t.lineTo(s.x,s.y),t.lineTo(this.stageWidth,this.stageHeight),t.lineTo(this.points[0].x,this.stageHeight),t.fill(),e}getY(){const t=this.stageHeight/8,i=this.stageHeight-t;return t+Math.random()*i}}class e{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.hills=[new s("#4D7798",.2,12),new s("#6598B8",.5,8),new s("#557FAA",1.4,6)],this.heroController=new i,window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),requestAnimationFrame(this.animate.bind(this))}resize(){this.stageWidth=document.body.clientWidth,this.stageHeight=document.body.clientHeight,this.canvas.width=2*this.stageWidth,this.canvas.height=2*this.stageHeight,this.ctx.scale(2,2);for(let t=0;t<this.hills.length;t++)this.hills[t].resize(this.stageWidth,this.stageHeight);this.heroController.resize(this.stageWidth,this.stageHeight)}animate(t){let i;requestAnimationFrame(this.animate.bind(this)),this.ctx.clearRect(0,0,this.stageWidth,this.stageHeight);for(let t=0;t<this.hills.length;t++)i=this.hills[t].draw(this.ctx);this.heroController.draw(this.ctx,t,i)}}window.onload=()=>{new e}})();